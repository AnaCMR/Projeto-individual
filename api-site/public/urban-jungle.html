<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ana's Garden - Urban-Jungle</title>
    <link rel="stylesheet" href="css/urban.css" />
    <link rel="icon" href="icons/plant.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Cinzel&family=Courgette&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />


    <script src="./js/funcoes.js"></script>

  </head>

<body>
    <div class="container">
        <header class="header">
            <div class="logo-div">
                <a href="index.html">
                    <img class="logo" src="icons/logo.png" alt="logo" />
                </a>
            </div>
            <nav class="container">
                <ul class="navbar">
                    <li><a href="index.html"> Home</a></li>
                    <li><a href="contato.html">Fale conosco </a></li>
                </ul>
                <button class="login" onclick="login()">Login</button>
                <button onclick="cadastro()">Cadastre-se</button>
            </nav>
        </header>
    </div>
    <div class="space">.</div>
    <div id="blur_div_cadastro">
        .
        <div id="cadastro_div">
          <p class="close" onclick="back_cadastro()">X</p>
          <form id="form_cadastro" method="post" onsubmit="return cadastrar()">
            <label class="login_label">Nome:</label><br />
            <input name="nome" class="login_input" id="name_user" /><br />
            <label class="login_label">E-mail:</label><br />
            <input name="email" class="login_input" id="user_email" /><br />
            <div class="div_perfil">
              <div class="age_data">
                <label class="login_label">Idade:</label><br />
                <input
                  name="idade"
                  type="date"
                  class="login_input age"
                  id="age_input"
                /><br />
              </div>
              <div class="gender_data">
                <label class="genero">Gênero</label><br />
                <select class="login_select_gender" id="gender_select">
                  <option value="f">F</option>
                  <option value="m">M</option>
                  <option value="não informado">Prefiro não informar</option>
                </select>
              </div>
            </div>
            <label class="login_label">Senha:</label><br />
            <input
            title="mostrar senha"
              name="senha"
              class="login_input"
              type="password"
              id="password_user"
            />
            <img
            id="olho_aberto_cadastro1"
            title="ocultar senha"
            class="olho_aberto"
            src="icons/see.png"
            onclick="changeImage()"
            alt="mudar para senha visivel"
          />
          <img
            id="olho_fechado_cadastro1"
            class="olho_fechado"
            onclick="ver()"
            src="icons/cloudy.png"
            alt="mudar para senha não visivel"
          />
  <br />
  
            <label class="login_label">Confirmar senha:</label><br />
            <input
              class="login_input"
              name="confirmacao-senha"
              type="password"
              id="confirm_password"
              title="mostrar senha"
            /><img
            id="olho_aberto_cadastro2"
            class="olho_aberto"
            src="icons/see.png"
            onclick="changeImage()"
            alt="mudar para senha visivel"
          />
          <img
            id="olho_fechado_cadastro2"
            class="olho_fechado"
            title="ocultar senha"
            onclick="ver()"
            src="icons/cloudy.png"
            alt="mudar para senha não visivel"
          /><br />
  
            <br />
  
            <button class="welcome" type="submit">Cadastrar-se</button>
          </form>
        </div>
        <div id="div_aguardar" class="loading-div">
          
      </div>
  
      <div id="div_erros_login"></div>
      </div>
  
      <div id="blur_div">
        .
        <div id="login_div">
          <p class="close" onclick="back_login()">X</p>
          <form id="form_login" method="post" onsubmit="return entrar()">
            <label class="login_label">E-mail:</label><br />
            <input name="email_login" class="login_input" id="user_email_login" /><br />
            <label class="login_label">Senha:</label><br />
            <input
              name="senha_login"
              class="login_input"
              type="password"
              id="password_user_login"
            /><img
            id="olho_aberto_login"
            title="mostrar senha"
            class="olho_aberto"
            src="icons/see.png"
            onclick="changeImage()"
            alt="mudar para senha visivel"
          />
          <img
            id="olho_fechado_login"
            class="olho_fechado"
            title="ocultar senha"
            onclick="ver()"
            src="icons/cloudy.png"
            alt="mudar para senha não visível"
          /><br />
            <br />
            <button onclick="welcome_login()" class="welcome" type="submit">
              Entrar
            </button>
          </form>
        </div>
        <div id="div_aguardar" class="loading-div">
          
      </div>
  
      <div id="div_erros_login"></div>
      </div>


    <section class="daily-article">
        <h3 class="title-article">O que é Urban Jungle?</h3>
        <div class="container-article">
            <div class="image-article">
                <img class="image-plant" src="imgs/urban-jungle1.png" alt="foto de uma sala com" />
                <div class="detail-article"> Na tradução livre do inglês para o português significa “Selva Urbana” e é
                    uma forma de trazer as plantas e o clima de ar puro para dentro de casa </div>
            </div>
            <div class="content-article">
                <p>
                    <span class="upper"> U</span>rban Jungle é um estilo de decoração que consiste em incluir plantas e elementos ligados à natureza
                    concentrados no interior de ambientes. Ele é feito com vasos, prateleiras, caixotes de madeira,
                    tijolos de concreto e diversos outros materiais.
                </p>
                <p>Além de resgatar a brasilidade, o Urban Jungle ajuda na saúde física e mental dos moradores, pois as
                    plantas trazer um ar de tranquilidade.
                </p>

                <p>

                    Em relação ao tamanho do imóvel, não há restrição na hora de executar o Urban Jungle. Para ambientes
                    pequenos, existem alguns truques que vamos explicar ao longo do texto.

                    Algumas plantas necessitam de mais iluminação e ventilação do que outras. Dessa forma, o ideal é que
                    o Urban Jungle seja aplicado em locais com mais luminosidade, como sacadas.
                </p>

                <h3 class="title-article">Segue algumas dicas:</h3>
            </div>
    </section>

    <section class="hints">
        <p><span class="number">1.</span> Escolha as espécies de acordo com as características do ambiente.
            O ideal é selecionar várias espécies pequenas e distribuí-las de forma orgânica.
        </p>
        <p>
            <span class="number">2.</span> Dê preferência para espécies de sombra. Só a abertura de cortinas e janelas já
            é o suficiente para o desenvolvimento dessas espécies.


        </p>
        <p>
            <span class="number">3.</span> Dê destaque para a folhagem
            As flores também são bem-vindas, mas para manter a personalidade do Urban Jungle a dica é usá-las
            discretamente, apenas como pontos de cor.
        </p>
        <p>

            <span class="number">4.</span> Aposte na diversidade.
        </p>


        <p>
            <span class="number">5.</span> Aposte na diferença de alturas
            Um dos grandes charmes do Urban Jungle é a diferença de tamanhos e alturas de vasos que criam uma composição
            única.

        </p>
    </section>
    <section>
        <img class="photo-urban" src="imgs/urban-jungle2.png" alt="Cozinha com plantas">
        <div class="gallery">
            <div class="photo-detail">
                <img src="imgs/urban-jungle3.png" alt="Lavanderia com plantas">
                <div class="detail-urban">O importante é estar feliz rodeado de plantas</div>
            </div>
            <img class="photo-sink" src="imgs/urban-jungle4.png" alt="Pia com plantas">
        </div> 
    </section>


    <section class="rate">
        <p>Gostou da matéria? Se gostou deixe seu like <img onclick="like()" class="icon-like" id="like_heart"
                src="icons/like.png" alt="coração de curtida"> <span id="change_like" class="small">
                <img onclick="deslike()" class="icon-like" src="icons/heart.png" alt="coração de curtida"> você e
                outras <span id="numbers_like">25</span> pessoas
                gostaram. </span> </p>
    </section>

    <section class="old-articles">
        <p>Veja algumas matérias que você pode se interessar</p>
        <div class="articles">
            <div class="box-article"><a href="hortoterapia.html">
                    <img src="imgs/plantas-artigo-1.png" alt="Foto de plantas">
                    <h4>Por que praticar a hortoterapia?</h4>
                </a>
            </div>
            <div class="box-article"><a href="love.html">
                    <img src="imgs/foto Gui.jpg" alt="Foto homem com planta">
                    <h4>O que dar de presente para um louco das plantas?</h4>
                </a>
            </div>
            <div class="box-article"><a href="pet.html">
                    <img src="imgs/pet-1.png" alt="Cachorro coberto por folhagem de jibóia">
                    <h4>Animais e plantas?</h4>
                </a>
            </div>
            <div class="box-article"> <a href="bedroom.html">
                    <img src="imgs/bedroom-1.png" alt="Foto de quarto com plantas">
                    <h4>Posso ter plantas no quarto?</h4>
                </a>
            </div>
        </div>
    </section>


    <footer id="footer">
        <p>Ana Marques &copy; 2021</p>
        <p>Todos os direitos reservados</p>
    </footer>
    </div>
</body>

</html>
<script src="js/functions.js"></script>
<script>
  function limparFormulario() {
document.getElementById("form_cadastro").reset();
}


function cadastrar() {
aguardar();

var formulario = new FormData(document.getElementById("form_cadastro"));

var nome = formulario.get("nome");
var email = formulario.get("email");
var senha = formulario.get("senha");
var confirmacaoSenha = formulario.get("confirmacao-senha");
var dataNasc = formulario.get("idade")

if (nome == "" || email == "" || senha == "" || confirmacaoSenha == "") {

  window.alert("Preencha todos os campos para prosseguir!");
  if (nome == "") {
      console.log('nome está em branco')
  }
  if (email == "") {
      console.log('email está em branco')
  }
  if (senha == "") {
      console.log('senha está em branco')
  }
  if (confirmacaoSenha == "") {
      console.log('confirmacaoSenha está em branco')
  }
  finalizarAguardar();
  return false;
}

if (email.indexOf("@") == -1 || email.indexOf(".com") == -1) {
  window.alert("Ops, e-mail inválido! Verifique e tente novamente.");
  finalizarAguardar();
  return false;
}

if (senha != confirmacaoSenha) {
  window.alert("As senhas inseridas devem ser iguais para prosseguir!");
  finalizarAguardar();
  return false;
}

fetch("/usuarios/cadastrar", {
  method: "POST",
  body: formulario
}).then(function (resposta) {

  console.log("resposta: ", resposta);

  if (resposta.ok) {
      window.alert("Cadastro realizado com sucesso!");
      window.location = "index.html";
      limparFormulario();
      finalizarAguardar();
  } else {
      throw ("Houve um erro ao tentar realizar o cadastro!");
  }
}).catch(function (resposta) {
  console.log(`#ERRO: ${resposta}`);
  finalizarAguardar();
});

return false;
}
function limparFormulario() {
        document.getElementById("form_login").reset();
    }

    function entrar() {
        aguardar();

        var formulario = new URLSearchParams(new FormData(document.getElementById("form_login")));

        var email = formulario.get("email_login");
        var senha = formulario.get("senha_login");

        console.log("FORM LOGIN: ", email);
        console.log("FORM SENHA: ", senha);


        if (email == "" || senha == "") {
            window.alert("Preencha todos os campos para prosseguir!");
            finalizarAguardar();
            return false;
        }

        if (email.indexOf("@") == -1 || email.indexOf(".com") == -1) {
            window.alert("Ops, e-mail inválido! Verifique e tente novamente.");
            finalizarAguardar();
            return false;
        }

        fetch("/usuarios/autenticar", {
            method: "POST",
            body: formulario
        }).then(function (resposta) {
            console.log("ESTOU NO THEN DO entrar()!")

            if (resposta.ok) {
                console.log(resposta);

                resposta.json().then(json => {
                    console.log(json);
                    console.log(JSON.stringify(json));

                    sessionStorage.EMAIL_USUARIO = json.email;
                    sessionStorage.NOME_USUARIO = json.nome;
                    sessionStorage.ID_USUARIO = json.id;

                    setTimeout(function () {
                      if (email == "ana.silva@bandtec.com.br"){
                        window.location = "./dashboard.html";
                      } else {
                        window.location = "./tela-perfil.html"
                      }
                    }, 1000); // apenas para exibir o loading

                });

            } else {

                console.log("Houve um erro ao tentar realizar o login!");

                resposta.text().then(texto => {
                    console.error(texto);
                    alert(texto);
                    finalizarAguardar(texto);
                });
            }

        }).catch(function (erro) {
            console.log(erro);
        })

        return false;
    }

</script>