<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ana's Garden - Plantas no quarto</title>
    <link rel="stylesheet" href="css/bedroom.css" />
    <link rel="icon" href="icons/plant.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Cinzel&family=Courgette&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <script src="./js/funcoes.js"></script>

  </head>

<body>
    <div class="container">
        <header class="header">
            <div class="logo-div">
                <a href="index.html">
                    <img class="logo" src="icons/logo.png" alt="logo" />
                </a>
            </div>
            <nav class="container">
                <ul class="navbar">
                    <li><a href="index.html"> Home</a></li>
                    <li><a href="contato.html">Fale conosco </a></li>
                </ul>
                <button class="login" onclick="login()">Login</button>
                <button onclick="cadastro()">Cadastre-se</button>
            </nav>
        </header>
    </div>
    <div class="space">.</div>
    <div id="blur_div_cadastro">
        .
        <div id="cadastro_div">
          <p class="close" onclick="back_cadastro()">X</p>
          <form id="form_cadastro" method="post" onsubmit="return cadastrar()">
            <label class="login_label">Nome:</label><br />
            <input name="nome" class="login_input" id="name_user" /><br />
            <label class="login_label">E-mail:</label><br />
            <input name="email" class="login_input" id="user_email" /><br />
            <div class="div_perfil">
              <div class="age_data">
                <label class="login_label">Idade:</label><br />
                <input
                  name="idade"
                  type="date"
                  class="login_input age"
                  id="age_input"
                /><br />
              </div>
              <div class="gender_data">
                <label class="genero">Gênero</label><br />
                <select class="login_select_gender" id="gender_select">
                  <option value="f">F</option>
                  <option value="m">M</option>
                  <option value="não informado">Prefiro não informar</option>
                </select>
              </div>
            </div>
            <label class="login_label">Senha:</label><br />
            <input
            title="mostrar senha"
              name="senha"
              class="login_input"
              type="password"
              id="password_user"
            />
            <img
            id="olho_aberto_cadastro1"
            title="ocultar senha"
            class="olho_aberto"
            src="icons/see.png"
            onclick="changeImage()"
            alt="mudar para senha visivel"
          />
          <img
            id="olho_fechado_cadastro1"
            class="olho_fechado"
            onclick="ver()"
            src="icons/cloudy.png"
            alt="mudar para senha não visivel"
          />
  <br />
  
            <label class="login_label">Confirmar senha:</label><br />
            <input
              class="login_input"
              name="confirmacao-senha"
              type="password"
              id="confirm_password"
              title="mostrar senha"
            /><img
            id="olho_aberto_cadastro2"
            class="olho_aberto"
            src="icons/see.png"
            onclick="changeImage()"
            alt="mudar para senha visivel"
          />
          <img
            id="olho_fechado_cadastro2"
            class="olho_fechado"
            title="ocultar senha"
            onclick="ver()"
            src="icons/cloudy.png"
            alt="mudar para senha não visivel"
          /><br />
  
            <br />
  
            <button class="welcome" type="submit">Cadastrar-se</button>
          </form>
        </div>
        <div id="div_aguardar" class="loading-div">
          
      </div>
  
      <div id="div_erros_login"></div>
      </div>
  
      <div id="blur_div">
        .
        <div id="login_div">
          <p class="close" onclick="back_login()">X</p>
          <form id="form_login" method="post" onsubmit="return entrar()">
            <label class="login_label">E-mail:</label><br />
            <input name="email_login" class="login_input" id="user_email_login" /><br />
            <label class="login_label">Senha:</label><br />
            <input
              name="senha_login"
              class="login_input"
              type="password"
              id="password_user_login"
            /><img
            id="olho_aberto_login"
            title="mostrar senha"
            class="olho_aberto"
            src="icons/see.png"
            onclick="changeImage()"
            alt="mudar para senha visivel"
          />
          <img
            id="olho_fechado_login"
            class="olho_fechado"
            title="ocultar senha"
            onclick="ver()"
            src="icons/cloudy.png"
            alt="mudar para senha não visível"
          /><br />
            <br />
            <button class="welcome" type="submit">
              Entrar
            </button>
          </form>
        </div>
        <div id="div_aguardar" class="loading-div">
          
      </div>
  
      <div id="div_erros_login"></div>
      </div>

    <section class="daily-article">
        <h3 class="title-article">Posso ter plantas no quarto?</h3>
        <div class="container-article">
            <div class="image-article">
                <img class="image-plant" src="imgs/bedroom-1.png" alt="foto de cama com criado mudo com planta" />
                <div class="detail-article">.</div>
            </div>
            <div class="content-article">
                <p>
                    <span class="upper"> A</span>s plantas, assim como nós, respiram e devolvem gás carbônico para o meio ambiente. No entanto,
                    existem alguns fatos para desmistificar o caso: <br> <br>
                    <span class="number">1. </span> as plantas realizam a fotossíntese e produzem
                    oxigênio quando recebem a luz solar, durante o dia; <br> <br>
                    <span class="number">2. </span> à noite respiram como nós, mas utilizam boa
                    tarde do oxigênio que elas mesmas produziram;  <br> <br>
                    <span class="number">3. </span> a quantidade de oxigênio consumido por uma
                    planta é quase irrisória perto do que nós, os animais de estimação ou outras pessoas que dormem no
                    mesmo ambiente consomem.
                </p>
                <p>Ou seja, dizer que faz mal ter plantas no quarto ou dormir perto de plantas, é mentira! Elas não vão
                    roubar o oxigênio, nem produzir algum gás tóxico. Só é preciso ter cuidado com flores que possam
                    exalar algum cheiro que você não goste ou seja alérgico, ou com espinhos que podem machucar, se
                    ficarem muito perto da cama.</p>
            </div>
            
        </div>
        
            <h3 class="title-article-2">Tem benefícios?</h3>
            <div class="content-article-2" >
            <p>SIM! Ter plantas no quarto pode trazer muitos benefícios para a saúde, além de deixar tudo mais
                bonito. As plantas purificam as impurezas do ar, eliminando possíveis toxinas que possam existir por
                conta da poluição da cidade, móveis etc. Também, dependendo da espécie, podem aumentar a umidade do
                ar e deixar o clima mais gostoso.</p>
            <p>E se você fica feliz ao ver os diferentes tipos de folhagens e flores, é claro que isso faz muito bem
                para o seu bem-estar e saúde mental. Isso sem deixar de mencionar que cuidar das plantas também é um
                ótimo exercício de meditação e busca pela calma e contato com a natureza. </p>
        </div>
    </section>
    <section>
        <div class="container-image-plant-2">
            <img class="image-plant2" src="imgs/bedroom-2.png" alt="foto de plantas suculentas" />
            <img class="image-plant2" src="imgs/bedroom-3.png" alt="foto de plantas suculentas" />

            <h3 class="detail-article2">Alguns exemplos de onde colocar suas plantas no quarto</h3>
        </div>
    </section>

    <section class="rate">
        <p>Gostou da matéria? Se gostou deixe seu like <img onclick="like()" class="icon-like" id="like_heart"
                src="icons/like.png" alt="coração de curtida"> <span id="change_like" class="small">
                <img onclick="deslike()" class="icon-like" src="icons/heart.png" alt="coração de curtida"> você e
                outras <span id="numbers_like">15</span> pessoas
                gostaram. </span> </p>
    </section>

    <section class="old-articles">
        <p>Veja algumas matérias que você pode se interessar</p>
        <div class="articles">
            <div class="box-article"><a href="urban-jungle.html">
                    <img src="imgs/urban-jungle1.png" alt="Foto de urban jungle">
                    <h4>Você sabe o que é Urban Jungle?</h4>
                </a>
            </div>
            <div class="box-article"><a href="love.html">
                    <img src="imgs/foto Gui.jpg" alt="Foto homem com planta">
                    <h4>O que dar de presente para um louco das plantas?</h4>
                </a>
            </div>
            <div class="box-article"><a href="pet.html">
                    <img src="imgs/pet-1.png" alt="Cachorro coberto por folhagem de jibóia">
                    <h4>Animais e plantas?</h4>
                </a>
            </div>
            <div class="box-article"> <a href="hortoterapia.html">
                    <img src="imgs/plantas-artigo-1.png" alt="Foto de plantas">
                    <h4>Por que fazer hortoterapia?</h4>
                </a>
            </div>
        </div>
    </section>


    <footer id="footer">
        <p>Ana Marques &copy; 2021</p>
        <p>Todos os direitos reservados</p>
    </footer>

</body>

</html>
<script src="js/functions.js"></script>
<script>
  function limparFormulario() {
document.getElementById("form_cadastro").reset();
}


function cadastrar() {
aguardar();

var formulario = new FormData(document.getElementById("form_cadastro"));

var nome = formulario.get("nome");
var email = formulario.get("email");
var senha = formulario.get("senha");
var confirmacaoSenha = formulario.get("confirmacao-senha");
var dataNasc = formulario.get("idade")

if (nome == "" || email == "" || senha == "" || confirmacaoSenha == "") {

  window.alert("Preencha todos os campos para prosseguir!");
  if (nome == "") {
      console.log('nome está em branco')
  }
  if (email == "") {
      console.log('email está em branco')
  }
  if (senha == "") {
      console.log('senha está em branco')
  }
  if (confirmacaoSenha == "") {
      console.log('confirmacaoSenha está em branco')
  }
  finalizarAguardar();
  return false;
}

if (email.indexOf("@") == -1 || email.indexOf(".com") == -1) {
  window.alert("Ops, e-mail inválido! Verifique e tente novamente.");
  finalizarAguardar();
  return false;
}

if (senha != confirmacaoSenha) {
  window.alert("As senhas inseridas devem ser iguais para prosseguir!");
  finalizarAguardar();
  return false;
}

fetch("/usuarios/cadastrar", {
  method: "POST",
  body: formulario
}).then(function (resposta) {

  console.log("resposta: ", resposta);

  if (resposta.ok) {
      window.alert("Cadastro realizado com sucesso!");
      window.location = "index.html";
      limparFormulario();
      finalizarAguardar();
  } else {
      throw ("Houve um erro ao tentar realizar o cadastro!");
  }
}).catch(function (resposta) {
  console.log(`#ERRO: ${resposta}`);
  finalizarAguardar();
});

return false;
}
function limparFormulario() {
        document.getElementById("form_login").reset();
    }

    function entrar() {
        aguardar();

        var formulario = new URLSearchParams(new FormData(document.getElementById("form_login")));

        var email = formulario.get("email_login");
        var senha = formulario.get("senha_login");

        console.log("FORM LOGIN: ", email);
        console.log("FORM SENHA: ", senha);

        // TODO: VERIFICAR AS VALIDAÇÕES QUE ELES ESTÃO APRENDENDO EM ALGORITMOS 
        if (email == "" || senha == "") {
            window.alert("Preencha todos os campos para prosseguir!");
            finalizarAguardar();
            return false;
        }

        if (email.indexOf("@") == -1 || email.indexOf(".com") == -1) {
            window.alert("Ops, e-mail inválido! Verifique e tente novamente.");
            finalizarAguardar();
            return false;
        }

        fetch("/usuarios/autenticar", {
            method: "POST",
            body: formulario
        }).then(function (resposta) {
            console.log("ESTOU NO THEN DO entrar()!")

            if (resposta.ok) {
                console.log(resposta);

                resposta.json().then(json => {
                    console.log(json);
                    console.log(JSON.stringify(json));

                    sessionStorage.EMAIL_USUARIO = json.email;
                    sessionStorage.NOME_USUARIO = json.nome;
                    sessionStorage.ID_USUARIO = json.id;

                    setTimeout(function () {
                      if (email == "ana.silva@bandtec.com.br"){
                        window.location = "./dashboard.html";
                      } else {
                        window.location = "./tela-perfil.html"
                      }
                    }, 1000); // apenas para exibir o loading

                });

            } else {

                console.log("Houve um erro ao tentar realizar o login!");

                resposta.text().then(texto => {
                    console.error(texto);
                    alert(texto);
                    finalizarAguardar(texto);
                });
            }

        }).catch(function (erro) {
            console.log(erro);
        })

        return false;
    }


</script>